<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    

    
<script>!function(){var e=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,t=localStorage.getItem("use-color-scheme")||"auto";("dark"===t||e&&"light"!==t)&&document.documentElement.classList.toggle("dark",!0)}()</script>
    

<meta charset="utf-8" >

<title>C-Puzzles</title>
<meta name="keywords" content="C-Puzzles, HzRr&#39;s Blog">
<meta name="description" content="C PuzzlesPuzzle 1The expected output of the following C program is to print the elements in the array. But when actually">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta property="og:title" content="C-Puzzles">
<meta property="og:description" content="C PuzzlesPuzzle 1The expected output of the following C program is to print the elements in the array. But when actually">

<link rel="shortcut icon" href="/null">
<link rel="stylesheet" href="/style/main.css">

  <meta name="generator" content="Hexo 6.3.0"></head>
  <body>
    <div id="app" class="main">

<div class="site-header-container">
  <div class="site-header">
    <div class="left">
      <a href="http://example.com">
        <img class="avatar" src="/images/avatar.svg" alt="logo" width="32px" height="32px">
      </a>
      <a href="http://example.com">
        <h1 class="site-title">HzRr&#39;s Blog</h1>
      </a>
    </div>
    <div class="right">
        <i class="icon menu-switch icon-menu-outline" ></i>
    </div>
  </div>
</div>

<div class="menu-container" style="height: 0;opacity: 0;">
<nav class="menu-list">
  
    
      <a href="/" class="menu purple-link">
        首页
      </a>
    
  
    
      <a href="/tags" class="menu purple-link">
        标签
      </a>
    
  
    
      <a href="/archives" class="menu purple-link">
        归档
      </a>
    
  
    
      <a href="/about" class="menu purple-link">
        关于
      </a>
    
  
</nav>
</div>



  <div class="content-container">
    <div class="post-detail">
      
      <h2 class="post-title">C-Puzzles</h2>
      <div class="post-info post-detail-info">
        <span><i class="icon icon-calendar-outline"></i> 2023-10-17</span>
        
          <span>
          <i class="icon icon-pricetags-outline"></i>
            
              <a href="/tags/C/">
              C
                
                  ，
                
              </a>
            
              <a href="/tags/Note/">
              Note
                
              </a>
            
          </span>
        
      </div>
      <div class="post-content-wrapper">
        <div class="post-content">
          <h1 id="C-Puzzles"><a href="#C-Puzzles" class="headerlink" title="C Puzzles"></a>C Puzzles</h1><h2 id="Puzzle-1"><a href="#Puzzle-1" class="headerlink" title="Puzzle 1"></a>Puzzle 1</h2><p>The expected output of the following C program is to print the elements in the array. But when actually run, it doesn’t do so.</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> TOTAL_ELEMENTS (sizeof(array) / sizeof(array[0]))</span></span><br><span class="line"><span class="type">int</span> <span class="built_in">array</span>[] = &#123;<span class="number">23</span>,<span class="number">34</span>,<span class="number">12</span>,<span class="number">17</span>,<span class="number">204</span>,<span class="number">99</span>,<span class="number">16</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> d;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(d=<span class="number">-1</span>;d &lt;= (TOTAL_ELEMENTS<span class="number">-2</span>);d++)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,<span class="built_in">array</span>[d+<span class="number">1</span>]);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Find out what’s going wrong.</p>
<h4 id="输出"><a href="#输出" class="headerlink" title="输出:"></a>输出:</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">myarch% gcc p01.c </span><br><span class="line">myarch% ./a.out </span><br></pre></td></tr></table></figure>

<h4 id="分析："><a href="#分析：" class="headerlink" title="分析："></a>分析：</h4><p>sizeof operator会返回一个size_t类型的值(<em>(Strictly, sizeof produces an unsigned integer value whose type, size_t, is defined in the header &lt;stddef.h&gt;</em>)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(gdb) p sizeof(sizeof(d))</span><br><span class="line">$4 = 4</span><br></pre></td></tr></table></figure>

<p>因此在for循环的 循环条件表达式 中进行了 (int) &lt;&#x3D; (unsigned int) 的操作， 而编译器根据Conversion Rules对其进行类型转换，将d(0xfffffffff)转换为unsigned int类型<br>(这里为什么转换成了32767)</p>
<p>解决方案是 d &lt;&lt; (unsigned)(TOTAL_ELEMENTS-2) 或者 不使用负数作为初始循环变量</p>
<h2 id="Puzzle-2"><a href="#Puzzle-2" class="headerlink" title="Puzzle 2"></a>Puzzle 2</h2><p>I thought the following program was a perfect C program. But on compiling, I found a silly mistake. Can you find it out (without compiling the program :-) ?</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">OS_Solaris_print</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Solaris - Sun Microsystems\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">OS_Windows_print</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Windows - Microsoft\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="type">void</span> OS_HP-UX_print()</span><br><span class="line">&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;HP-UX - Hewlett Packard\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">        <span class="type">int</span> num;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Enter the number (1-3):\n&quot;</span>);</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;num);</span><br><span class="line">        <span class="keyword">switch</span>(num)</span><br><span class="line">        &#123;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">                        OS_Solaris_print();</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">                        OS_Windows_print();</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">                        OS_HP-UX_print();</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">default</span>:</span><br><span class="line">                        <span class="built_in">printf</span>(<span class="string">&quot;Hmm! only 1-3 :-)\n&quot;</span>);</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="输出-1"><a href="#输出-1" class="headerlink" title="输出:"></a>输出:</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">myarch% gcc p02.c </span><br><span class="line">p02.c:13:11: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘-’ token</span><br><span class="line">   13 | void OS_HP-UX_print()</span><br><span class="line">      |           ^</span><br><span class="line">p02.c: In function ‘main’:</span><br><span class="line">p02.c:32:25: error: ‘OS_HP’ undeclared (first use in this function)</span><br><span class="line">   32 |                         OS_HP-UX_print();</span><br><span class="line">      |                         ^~~~~</span><br><span class="line">p02.c:32:25: note: each undeclared identifier is reported only once for each function it appears in</span><br><span class="line">p02.c:32:31: warning: implicit declaration of function ‘UX_print’ [-Wimplicit-function-declaration]</span><br><span class="line">   32 |                         OS_HP-UX_print();</span><br><span class="line">      |                  </span><br></pre></td></tr></table></figure>

<h2 id="Puzzle-3"><a href="#Puzzle-3" class="headerlink" title="Puzzle 3"></a>Puzzle 3</h2><p>What’s the expected output for the following program and why?</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">enum &#123;false,true&#125;;</span><br><span class="line"></span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">        int i=1;</span><br><span class="line">        do</span><br><span class="line">        &#123;</span><br><span class="line">                printf(&quot;%d\n&quot;,i);</span><br><span class="line">                i++;</span><br><span class="line">                if(i &lt; 15)</span><br><span class="line">                        continue;</span><br><span class="line">        &#125;while(false);</span><br><span class="line">        return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="输出-2"><a href="#输出-2" class="headerlink" title="输出:"></a>输出:</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">myarch% gcc p03.c </span><br><span class="line">myarch% ./a.out </span><br><span class="line">1</span><br></pre></td></tr></table></figure>

<h4 id="分析"><a href="#分析" class="headerlink" title="分析:"></a>分析:</h4><p>因为C语言中没有bool型，所以用enum枚举类型实现false(0), true(1)</p>
<blockquote>
<p>The identifiers in an enumerator list are declared as constants of type int, and may appear<br>wherever constants are required. If no enumerations with &#x3D; appear, then the values of the<br>corresponding constants begin at 0 and increase by 1 as the declaration is read from left to<br>right. An enumerator with &#x3D; gives the associated identifier the value specified; subsequent<br>identifiers continue the progression from the assigned value.</p>
</blockquote>
<h2 id="Puzzle-4"><a href="#Puzzle-4" class="headerlink" title="Puzzle 4"></a>Puzzle 4</h2><p>The following program doesn’t “seem” to print “hello-out”. (Try executing it)</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">        <span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">                <span class="built_in">fprintf</span>(<span class="built_in">stdout</span>,<span class="string">&quot;hello-out&quot;</span>);</span><br><span class="line">                <span class="built_in">fprintf</span>(<span class="built_in">stderr</span>,<span class="string">&quot;hello-err&quot;</span>);</span><br><span class="line">                sleep(<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>What could be the reason?</p>
<h4 id="输出-3"><a href="#输出-3" class="headerlink" title="输出:"></a>输出:</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">myarch% gcc -g p04.c </span><br><span class="line">myarch% ./a.out </span><br><span class="line">hello-errhello-errhello-errhello-err^C</span><br></pre></td></tr></table></figure>

<h4 id="gdb调试："><a href="#gdb调试：" class="headerlink" title="gdb调试："></a>gdb调试：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">Breakpoint 1, main () at p04.c:7</span><br><span class="line">7                       fprintf(stdout,&quot;hello-out&quot;);</span><br><span class="line">(gdb) p stdout</span><br><span class="line">$1 = (FILE *) 0x7ffff7f925c0 &lt;_IO_2_1_stdout_&gt;</span><br><span class="line">(gdb) n</span><br><span class="line">8                       fprintf(stderr,&quot;hello-err&quot;);</span><br><span class="line">(gdb) n</span><br><span class="line">hello-err9                      sleep(1);</span><br><span class="line">(gdb) set stdout = stderr</span><br><span class="line">(gdb) n</span><br><span class="line">n7                      fprintf(stdout,&quot;hello-out&quot;);</span><br><span class="line">(gdb) n</span><br><span class="line"></span><br><span class="line">Breakpoint 1, main () at p04.c:7</span><br><span class="line">7                       fprintf(stdout,&quot;hello-out&quot;);</span><br><span class="line">(gdb) n</span><br><span class="line">hello-out8                      fprintf(stderr,&quot;hello-err&quot;);</span><br></pre></td></tr></table></figure>

<h4 id="分析-1"><a href="#分析-1" class="headerlink" title="分析:"></a>分析:</h4><p>fprintf &#x2F; printf 等函数的输出数据会先被缓冲到指定的缓冲区(<strong>默认为标准输出流stdout</strong>), 而stderr的输出则不会被缓冲，直接显示到屏幕上，若将代码改为</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;hello-out&quot;</span>);</span><br><span class="line"><span class="comment">//        while(1)</span></span><br><span class="line">        &#123;</span><br><span class="line">                <span class="built_in">fprintf</span>(<span class="built_in">stderr</span>,<span class="string">&quot;hello-err&quot;</span>);</span><br></pre></td></tr></table></figure>

<h4 id="输出-4"><a href="#输出-4" class="headerlink" title="输出:"></a>输出:</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">myarch% ./a.out </span><br><span class="line">hello-errhello-out%                                                                                                                                                </span><br><span class="line">myarch% ./a.out &gt; tmp</span><br><span class="line">hello-err%                                                                                                                                                         </span><br><span class="line">myarch% cat tmp</span><br><span class="line">hello-out%                                                                                                                                                         </span><br></pre></td></tr></table></figure>

<blockquote>
<p>output can usually be directed to a file with &gt;filename: if prog uses putchar,<br>  <code>prog &gt;outfile</code><br>will write the standard output to outfile instead. If pipes are supported,<br>  <code>prog | anotherprog</code><br>puts the standard output of prog into the standard input of anotherprog.<br>Output produced by printf also finds its way to the standard output. Calls to putchar and<br>printf may be interleaved - output happens in the order in which the calls are made.</p>
</blockquote>
<h2 id="Puzzle-5"><a href="#Puzzle-5" class="headerlink" title="Puzzle 5"></a>Puzzle 5</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> f(a,b) a##b</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> g(a)   #a</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> h(a) g(a)</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%s\n&quot;</span>,h(f(<span class="number">1</span>,<span class="number">2</span>)));</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%s\n&quot;</span>,g(f(<span class="number">1</span>,<span class="number">2</span>)));</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Just by looking at the program one “might” expect the output to be, the same for both the printf statements. But on running the program you get it as:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">myarch% gcc p05.c </span><br><span class="line">myarch% ./a.out </span><br><span class="line">12</span><br><span class="line">f(1,2)</span><br></pre></td></tr></table></figure>

<p>Why is it so?</p>
<h4 id="K-R-C中的描述："><a href="#K-R-C中的描述：" class="headerlink" title="K&amp;R C中的描述："></a>K&amp;R C中的描述：</h4><blockquote>
<p>Formal parameters are not replaced within quoted strings. If, however, a parameter name is<br>preceded by a # in the replacement text, the combination will be expanded into a quoted string<br>with the parameter replaced by the actual argument. This can be combined with string<br>concatenation to make, for example, a debugging print macro:<br> <code>#define dprint(expr) printf(#expr &quot; = %g\n&quot;, expr)</code><br>When this is invoked, as in<br> <code>dprint(x/y)</code><br>the macro is expanded into<br> <code>printf(&quot;x/y&quot; &quot; = &amp;g\n&quot;, x/y)</code></p>
</blockquote>
<blockquote>
<p>The preprocessor operator ## provides a way to concatenate actual arguments during macro<br>expansion. If a parameter in the replacement text is adjacent to a ##, the parameter is replaced<br>by the actual argument, the ## and surrounding white space are removed, and the result is rescanned. For example, the macro paste concatenates its two arguments:<br> <code>#define paste(front, back) front ## back</code><br>so paste(name, 1) creates the token name1.</p>
</blockquote>
<h2 id="Puzzle-6"><a href="#Puzzle-6" class="headerlink" title="Puzzle 6"></a>Puzzle 6</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line">  <span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">  &#123;</span><br><span class="line">          <span class="type">int</span> a=<span class="number">10</span>;</span><br><span class="line">          <span class="keyword">switch</span>(a)</span><br><span class="line">          &#123;</span><br><span class="line">                  <span class="keyword">case</span> <span class="string">&#x27;1&#x27;</span>:</span><br><span class="line">                      <span class="built_in">printf</span>(<span class="string">&quot;ONE\n&quot;</span>);</span><br><span class="line">                      <span class="keyword">break</span>;</span><br><span class="line">                  <span class="keyword">case</span> <span class="string">&#x27;2&#x27;</span>:</span><br><span class="line">                      <span class="built_in">printf</span>(<span class="string">&quot;TWO\n&quot;</span>);</span><br><span class="line">                      <span class="keyword">break</span>;</span><br><span class="line">                  defa1ut:</span><br><span class="line">                      <span class="built_in">printf</span>(<span class="string">&quot;NONE\n&quot;</span>);</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p>If you expect the output of the above program to be NONE, I would request you to check it out!!</p>
<p><strong>defa1ut</strong></p>
<h2 id="Puzzle-7"><a href="#Puzzle-7" class="headerlink" title="Puzzle 7"></a>Puzzle 7</h2><p>The following C program segfaults of IA-64, but works fine on IA-32.</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span>* p;</span><br><span class="line">    p = (<span class="type">int</span>*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="type">int</span>));</span><br><span class="line">    *p = <span class="number">10</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Why does it happen so?</p>
<h4 id="分析-2"><a href="#分析-2" class="headerlink" title="分析:"></a>分析:</h4><p>Word length of IA-64: 8 Bytes,<br>Word length of IA-32: 4 Bytes,<br>Length of malloc(sizeof(int)): 4 Bytes.</p>
<h2 id="Puzzle-8"><a href="#Puzzle-8" class="headerlink" title="Puzzle 8"></a>Puzzle 8</h2><p>Here is a small piece of program(again just 14 lines of program) which counts the number of bits set in a number.<br>Input	Output<br>0	0(0000000)<br>5	2(0000101)<br>7	3(0000111)</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">CountBits</span> <span class="params">(<span class="type">unsigned</span> <span class="type">int</span> x )</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">static</span> <span class="type">unsigned</span> <span class="type">int</span> mask[] = &#123; <span class="number">0x55555555</span>,</span><br><span class="line">        <span class="number">0x33333333</span>,</span><br><span class="line">        <span class="number">0x0F0F0F0F</span>,</span><br><span class="line">        <span class="number">0x00FF00FF</span>,</span><br><span class="line">        <span class="number">0x0000FFFF</span></span><br><span class="line">        &#125; ;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> i ;</span><br><span class="line">        <span class="type">int</span> shift ; <span class="comment">/* Number of positions to shift to right*/</span></span><br><span class="line">        <span class="keyword">for</span> ( i =<span class="number">0</span>, shift =<span class="number">1</span>; i &lt; <span class="number">5</span>; i ++, shift *= <span class="number">2</span>)</span><br><span class="line">                x = (x &amp; mask[i ])+ ( ( x &gt;&gt; shift) &amp; mask[i]);</span><br><span class="line">        <span class="keyword">return</span> x;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Find out the logic used in the above program.</p>
<h4 id="分析：-1"><a href="#分析：-1" class="headerlink" title="分析："></a>分析：</h4><table>
<thead>
<tr>
<th>十六进制</th>
<th>二进制</th>
</tr>
</thead>
<tbody><tr>
<td>0x55555555</td>
<td>01010101010101010101010101010101</td>
</tr>
<tr>
<td>0x33333333</td>
<td>00110011001100110011001100110011</td>
</tr>
<tr>
<td>0x0F0F0F0F</td>
<td>00001111000011110000111100001111</td>
</tr>
<tr>
<td>0x00FF00FF</td>
<td>00000000111111110000000011111111</td>
</tr>
<tr>
<td>0x0000FFFF</td>
<td>00000000000000001111111111111111</td>
</tr>
</tbody></table>
<p>在统计每个 (unsigned int) x的二进制位有多少个1时，它使用了上述五个掩码(mask), 观察发现：这五个掩码的二进制值是按照 ** 01 -&gt; 0011 -&gt; 00001111 -&gt; 0000000011111111 -&gt; 00000000000000001111111111111111** 的规律变化的，而偏移量(shift)的值也与1的数目相关 <strong>1 -&gt; 2 -&gt; 4 -&gt; 8 -&gt; 16</strong></p>
<p>而根据表达式 x &#x3D; (x &amp; mask[i ])+ ( ( x &gt;&gt; shift) &amp; mask[i]); 可以看出： 第一次是计算每两位的1的数目并储存在两个bit内, 第二次是计算每四位的1的数目并储存在4个bit内……以此类推，最后计算每32位(即x)的二进制位中1的数目并储存在32个bit内(即x所在内存块)</p>
<h2 id="Puzzle-9"><a href="#Puzzle-9" class="headerlink" title="Puzzle 9"></a>Puzzle 9</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">        <span class="type">float</span> f=<span class="number">0.0f</span>;</span><br><span class="line">        <span class="type">int</span> i;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++)</span><br><span class="line">                f = f + <span class="number">0.1f</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(f == <span class="number">1.0f</span>)</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;f is 1.0 \n&quot;</span>);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;f is NOT 1.0\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="原因分析："><a href="#原因分析：" class="headerlink" title="原因分析："></a>原因分析：</h4><p>浮点数的精度缺失问题， 可以看看这个链接讲的(这个链接内在举例精度缺失有个例子是错的，注意甄别)：</p>
<p><a target="_blank" rel="noopener" href="https://akaedu.github.io/book/ch14s04.html">原页面</a></p>
<p><a target="_blank" rel="noopener" href="https://web.archive.org/web/20220124185901/https://akaedu.github.io/book/ch14s04.html">网页归档</a></p>
<h4 id="gdb调试输出："><a href="#gdb调试输出：" class="headerlink" title="gdb调试输出："></a>gdb调试输出：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">Breakpoint 1, main () at p09.c:9</span><br><span class="line">9                       f = f + 0.1f;</span><br><span class="line">(gdb) c</span><br><span class="line">Continuing.</span><br><span class="line"></span><br><span class="line">Breakpoint 1, main () at p09.c:9</span><br><span class="line">9                       f = f + 0.1f;</span><br><span class="line">(gdb) p f</span><br><span class="line">$1 = 0.100000001</span><br><span class="line">(gdb) c</span><br><span class="line">Continuing.</span><br><span class="line"></span><br><span class="line">Breakpoint 1, main () at p09.c:9</span><br><span class="line">9                       f = f + 0.1f;</span><br><span class="line">(gdb) p f</span><br><span class="line">$2 = 0.200000003</span><br><span class="line">(gdb) d breakpoints 0</span><br><span class="line">warning: bad breakpoint number at or near &#x27;0&#x27;</span><br><span class="line">(gdb) d breakpoints 1</span><br><span class="line">(gdb) c</span><br><span class="line">Continuing.</span><br><span class="line"></span><br><span class="line">Breakpoint 2, main () at p09.c:11</span><br><span class="line">11              if(f == 1.0f)</span><br><span class="line">(gdb) p f</span><br><span class="line">$3 = 1.00000012</span><br></pre></td></tr></table></figure>

<h2 id="Puzzle-10"><a href="#Puzzle-10" class="headerlink" title="Puzzle 10"></a>Puzzle 10</h2><p>I thought the following C program is perfectly valid (after reading about the comma operator in C). But there is a mistake in the following program, can you identify it?</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">        <span class="type">int</span> a = <span class="number">1</span>,<span class="number">2</span>;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;a : %d\n&quot;</span>,a);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="输出："><a href="#输出：" class="headerlink" title="输出："></a>输出：</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">myarch% gcc p10.c </span><br><span class="line">p10.c: In function ‘main’:</span><br><span class="line">p10.c:<span class="number">5</span>:<span class="number">19</span>: error: expected identifier or ‘(’ before numeric constant</span><br><span class="line">    <span class="number">5</span> |         <span class="type">int</span> a = <span class="number">1</span>,<span class="number">2</span>;</span><br><span class="line">      |                   ^</span><br></pre></td></tr></table></figure>

<h4 id="分析：-2"><a href="#分析：-2" class="headerlink" title="分析："></a>分析：</h4><p>C语言的逗号运算符(comma operator)在赋值表达式中只能出现在**括号分组(parenthetical grouping)**中，因此示例代码会出现编译错误。</p>
<blockquote>
<p>the required syntactic unit is an assignment expression, so the comma operator<br>appears only in a parenthetical grouping, for example,<br> <code>f(a, (t=3, t+2), c)</code><br>has three arguments, the second of which has the value 5.</p>
</blockquote>
<p>PS: 逗号运算符（Comma Operator）也是一种双目运算符，它的形式是表达式1, 表达式2，两个表达式不要求类型一致，左边的表达式1先求值，求完了直接把值丢掉，再求右边表达式2的值作为整个表达式的值。</p>
<p>btw: 如果不是赋值表达式中，可以不用括号， 例如: <code>1 == 2, a = 3;</code></p>
<h2 id="Puzzle-11"><a href="#Puzzle-11" class="headerlink" title="Puzzle 11"></a>Puzzle 11</h2><p>What would be the output of the following C program? (Is it a valid C program?)</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">        <span class="type">int</span> i=<span class="number">43</span>;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,<span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,<span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,i)));</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="输出：-1"><a href="#输出：-1" class="headerlink" title="输出："></a>输出：</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">myarch% gcc p11.c </span><br><span class="line">myarch% ./a.out </span><br><span class="line"><span class="number">4321</span></span><br></pre></td></tr></table></figure>

<h4 id="分析：-3"><a href="#分析：-3" class="headerlink" title="分析："></a>分析：</h4><p>printf的函数原型:</p>
<pre><code>int printf(char *format, arg1, arg2, ...);
</code></pre>
<p>而其返回值为输出的字符串长度, 因此示例代码的结果为 43 2 1\n.</p>
<p>可以参考<a target="_blank" rel="noopener" href="https://zh.cppreference.com/w/c/io/fprintf">C风格的输入输出</a></p>
<p>摘自该网站：</p>
<blockquote>
<p>printf函数的返回值： 传输到输出流的字符数，或若出现输出错误或编码错误（对于字符串和字符转换说明符）则为负值。</p>
</blockquote>
<h2 id="Puzzle-12"><a href="#Puzzle-12" class="headerlink" title="Puzzle 12"></a>Puzzle 12</h2><p>Are the following two function prototypes same?</p>
<pre><code>int foobar(void);
int foobar();
</code></pre>
<p>The following programs should be of some help in finding the answer: (Compile and run both the programs and see what happens)</p>
<p>Program 1:</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">void</span> <span class="title function_">foobar1</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line"> <span class="built_in">printf</span>(<span class="string">&quot;In foobar1\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">foobar2</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line"> <span class="built_in">printf</span>(<span class="string">&quot;In foobar2\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">   <span class="type">char</span> ch = <span class="string">&#x27;a&#x27;</span>;</span><br><span class="line">   foobar1();</span><br><span class="line">   foobar2(<span class="number">33</span>, ch);</span><br><span class="line">   <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Program 2:</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">void</span> <span class="title function_">foobar1</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line"> <span class="built_in">printf</span>(<span class="string">&quot;In foobar1\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">foobar2</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line"> <span class="built_in">printf</span>(<span class="string">&quot;In foobar2\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">   <span class="type">char</span> ch = <span class="string">&#x27;a&#x27;</span>;</span><br><span class="line">   foobar1(<span class="number">33</span>, ch);</span><br><span class="line">   foobar2();</span><br><span class="line">   <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="输出：-2"><a href="#输出：-2" class="headerlink" title="输出："></a>输出：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">void foobar1(void)</span><br><span class="line">&#123;</span><br><span class="line"> printf(&quot;In foobar1\n&quot;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void foobar2()</span><br><span class="line">&#123;</span><br><span class="line"> printf(&quot;In foobar2\n&quot;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">   char ch = &#x27;a&#x27;;</span><br><span class="line">   foobar1(33, ch);</span><br><span class="line">   foobar2();</span><br><span class="line">   return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="分析：-4"><a href="#分析：-4" class="headerlink" title="分析："></a>分析：</h4><p>在C语言中，如果函数定义没有明确地指定形式参数（形参），那么它仍然可以接受任意数量和类型的参数。这是C语言为了向后兼容早期版本而采用的约定。</p>
<h2 id="Puzzle-13"><a href="#Puzzle-13" class="headerlink" title="Puzzle 13"></a>Puzzle 13</h2><p>What’s the output of the following program and why?</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line"> <span class="type">float</span> a = <span class="number">12.5</span>;</span><br><span class="line"> <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, a);</span><br><span class="line"> <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, *(<span class="type">int</span> *)&amp;a);</span><br><span class="line"> <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="输出-5"><a href="#输出-5" class="headerlink" title="输出:"></a>输出:</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">myarch% gcc p13.c </span><br><span class="line">myarch% ./a.out </span><br><span class="line">-1652536760</span><br><span class="line">1095237632</span><br><span class="line">myarch% gcc p13.c</span><br><span class="line">myarch% ./a.out  </span><br><span class="line">-1233055752</span><br><span class="line">1095237632</span><br></pre></td></tr></table></figure>

<h4 id="分析：-5"><a href="#分析：-5" class="headerlink" title="分析："></a>分析：</h4><ul>
<li>第一个printf试图将一个按照 int 型来解释 float 型的内存位，其结果是 undefined ，即对不同编译器或者不同环境甚至是重复运行产生的结果都是不可预测的。</li>
<li>第二个printf中先将a的地址强制转换为指向int型的指针，因此在解释其内存位时会按照int型来解释，按照IEEE 单精度浮点数的标准，12.5的二进制值为: <code>01000001010010000000000000000000</code>，解释为int型对应的数字为 <code>1095237632</code> 即为对应输出</li>
</ul>
<h2 id="Puzzle-14"><a href="#Puzzle-14" class="headerlink" title="Puzzle 14"></a>Puzzle 14</h2><p>The following is a small C program split across files. What do you expect the output to be, when both of them compiled together and run?</p>
<p>File1.c</p>
<pre><code>int arr[80];
</code></pre>
<p>File2.c</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">extern</span> <span class="type">int</span> *arr;</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    arr[<span class="number">1</span>] = <span class="number">100</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="输出：-3"><a href="#输出：-3" class="headerlink" title="输出："></a>输出：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">myarch% gcc p14-1.c p14-2.c </span><br><span class="line">myarch% ./a.out </span><br><span class="line">zsh: segmentation fault (core dumped)  ./a.out</span><br></pre></td></tr></table></figure>

<h4 id="分析：-6"><a href="#分析：-6" class="headerlink" title="分析："></a>分析：</h4><p>在File1.c中arr被定义为一个数组，而在File2.c中他又被声明为指向int型的指针，因此在File2.c中对arr进行索引操作是非法的，导致产生段错误(Segmentation Fault)</p>
<p>PS: 关键字extern在C语言中用于声明一个变量，但不初始化它。它通常用于指示该变量在程序的其他位置或在其他源文件中定义。简单地说，extern用于告诉编译器：这个变量是在别的地方定义的，但我想在当前的上下文中使用它。</p>
<h2 id="Puzzle-15"><a href="#Puzzle-15" class="headerlink" title="Puzzle 15"></a>Puzzle 15</h2><p>Explain the output of the following C program (No, the output is not 20).</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> a=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">switch</span>(a)</span><br><span class="line">    &#123;   <span class="type">int</span> b=<span class="number">20</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">1</span>: <span class="built_in">printf</span>(<span class="string">&quot;b is %d\n&quot;</span>,b);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">default</span>:<span class="built_in">printf</span>(<span class="string">&quot;b is %d\n&quot;</span>,b);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="输出-6"><a href="#输出-6" class="headerlink" title="输出:"></a>输出:</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">myarch% gcc p15.c </span><br><span class="line">p15.c: In function ‘main’:</span><br><span class="line">p15.c:6:13: warning: statement will never be executed [-Wswitch-unreachable]</span><br><span class="line">    6 |     &#123;   int b=20;</span><br><span class="line">      |             ^</span><br><span class="line">myarch% ./a.out </span><br><span class="line">b is 32691</span><br><span class="line">myarch% ./a.out</span><br><span class="line">b is 32654</span><br></pre></td></tr></table></figure>

<h4 id="分析：-7"><a href="#分析：-7" class="headerlink" title="分析："></a>分析：</h4><p>在编译时编译器已经给出了警告(warning), <code>int b = 20;</code> 这条指令不会被执行，而根据编译出的汇编代码也可以看出没有正确初始化b这个变量, 而只是给其分配了寄存器中的地址(rbp-0x4)。</p>
<p>汇编代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">0000000000000000 &lt;main&gt;:</span><br><span class="line">   0:   55                      push   %rbp</span><br><span class="line">   1:   48 89 e5                mov    %rsp,%rbp</span><br><span class="line">   4:   48 83 ec 10             sub    $0x10,%rsp</span><br><span class="line">   8:   c7 45 f8 01 00 00 00    movl   $0x1,-0x8(%rbp)</span><br><span class="line">   f:   83 7d f8 01             cmpl   $0x1,-0x8(%rbp)</span><br><span class="line">  13:   75 1b                   jne    30 &lt;main+0x30&gt;</span><br><span class="line">  15:   8b 45 fc                mov    -0x4(%rbp),%eax</span><br><span class="line">  18:   89 c6                   mov    %eax,%esi</span><br><span class="line">  1a:   48 8d 05 00 00 00 00    lea    0x0(%rip),%rax        # 21 &lt;main+0x21&gt;</span><br><span class="line">  21:   48 89 c7                mov    %rax,%rdi</span><br><span class="line">  24:   b8 00 00 00 00          mov    $0x0,%eax</span><br><span class="line">  29:   e8 00 00 00 00          call   2e &lt;main+0x2e&gt;</span><br><span class="line">  2e:   eb 1a                   jmp    4a &lt;main+0x4a&gt;</span><br><span class="line">  30:   8b 45 fc                mov    -0x4(%rbp),%eax</span><br><span class="line">  33:   89 c6                   mov    %eax,%esi</span><br><span class="line">  35:   48 8d 05 00 00 00 00    lea    0x0(%rip),%rax        # 3c &lt;main+0x3c&gt;</span><br><span class="line">  3c:   48 89 c7                mov    %rax,%rdi</span><br><span class="line">  3f:   b8 00 00 00 00          mov    $0x0,%eax</span><br><span class="line">  44:   e8 00 00 00 00          call   49 &lt;main+0x49&gt;</span><br><span class="line">  49:   90                      nop</span><br><span class="line">  4a:   b8 00 00 00 00          mov    $0x0,%eax</span><br><span class="line">  4f:   c9                      leave</span><br><span class="line">  50:   c3                      ret</span><br></pre></td></tr></table></figure>

<p>gdb查看rbp-0x4处地址与变量b对应地址相同:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">(gdb) x/1xw $rbp-0x4</span><br><span class="line">0x7fffffffdfac: 0x00007fff</span><br><span class="line">(gdb) p &amp;b</span><br><span class="line">$4 = (int *) 0x7fffffffdfac</span><br><span class="line">(gdb) x/d $rbp-0x4</span><br><span class="line">0x7fffffffdfac: 32767</span><br><span class="line">(gdb) p b</span><br><span class="line">$5 = 32767</span><br></pre></td></tr></table></figure>

<h2 id="Puzzle-16"><a href="#Puzzle-16" class="headerlink" title="Puzzle 16"></a>Puzzle 16</h2><p>What is the output of the following program? (Again, it is not 40, (if the size of integer is 4)).</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> SIZE 10</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">size</span><span class="params">(<span class="type">int</span> arr[SIZE])</span></span><br><span class="line">&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;size of array is:%d\n&quot;</span>,<span class="keyword">sizeof</span>(arr));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">        <span class="type">int</span> arr[SIZE];</span><br><span class="line">        size(arr);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="输出：-4"><a href="#输出：-4" class="headerlink" title="输出："></a>输出：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">myarch% gcc p16.c </span><br><span class="line">p16.c: In function ‘size’:</span><br><span class="line">p16.c:6:46: warning: ‘sizeof’ on array function parameter ‘arr’ will return size of ‘int *’ [-Wsizeof-array-argument]</span><br><span class="line">    6 |         printf(&quot;size of array is:%d\n&quot;,sizeof(arr));</span><br><span class="line">      |                                              ^</span><br><span class="line">p16.c:4:15: note: declared here</span><br><span class="line">    4 | void size(int arr[SIZE])</span><br><span class="line">      |           ~~~~^~~~~~~~~</span><br><span class="line">myarch% ./a.out </span><br><span class="line">size of array is:8</span><br></pre></td></tr></table></figure>

<h4 id="分析：-8"><a href="#分析：-8" class="headerlink" title="分析："></a>分析：</h4><p>C语言在传递数组到函数是，会将数组解释为指向数组第一个元素的指针，因此在64位机器上，size of array is:8</p>
<blockquote>
<p>When an array name is passed to a function, what is passed is the location of the initial element. Within the called function, this argument is a local variable, and so an array name parameter is a pointer, that is, a variable containing an address. We can use this fact to write another version of strlen, which computes the length of a string. </p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* strlen: return length of string s */</span> </span><br><span class="line"><span class="type">int</span> <span class="title function_">strlen</span><span class="params">(<span class="type">char</span> *s)</span> </span><br><span class="line">&#123; </span><br><span class="line"><span class="type">int</span> n; </span><br><span class="line"><span class="keyword">for</span> (n = <span class="number">0</span>; *s != <span class="string">&#x27;\0&#x27;</span>, s++) </span><br><span class="line">n++; </span><br><span class="line"><span class="keyword">return</span> n; </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>

<p>Since s is a pointer, incrementing it is perfectly legal; s++ has no effect on the character string in the function that called strlen, but merely increments strlen’s private copy of the pointer. That means that calls like </p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">strlen</span>(<span class="string">&quot;hello, world&quot;</span>); <span class="comment">/* string constant */</span> </span><br><span class="line"><span class="built_in">strlen</span>(<span class="built_in">array</span>); <span class="comment">/* char array[100]; */</span> </span><br><span class="line"><span class="built_in">strlen</span>(ptr); <span class="comment">/* char *ptr; */</span> </span><br></pre></td></tr></table></figure>

<p>all work.</p>
<h2 id="Puzzle-17"><a href="#Puzzle-17" class="headerlink" title="Puzzle 17"></a>Puzzle 17</h2><p>The following is a simple c program, in which there is a function called Error to display errors. Can you see a potential problem with the way Error is defined?</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">void</span> <span class="title function_">Error</span><span class="params">(<span class="type">char</span>* s)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">printf</span>(s);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> *p;</span><br><span class="line">    p = <span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="type">int</span>));</span><br><span class="line">    <span class="keyword">if</span>(p == <span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        Error(<span class="string">&quot;Could not allocate the memory\n&quot;</span>);</span><br><span class="line">        Error(<span class="string">&quot;Quitting....\n&quot;</span>);</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">/*some stuff to use p*/</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="输出：-5"><a href="#输出：-5" class="headerlink" title="输出："></a>输出：</h4><pre><code>myarch% ./a.out
myarch%
</code></pre>
<h4 id="分析：-9"><a href="#分析：-9" class="headerlink" title="分析："></a>分析：</h4><p>在打印error文本时，未对指针进行取值操作。</p>
<h2 id="Puzzle-18"><a href="#Puzzle-18" class="headerlink" title="Puzzle 18"></a>Puzzle 18</h2><p>空格</p>
<h2 id="Puzzle-19"><a href="#Puzzle-19" class="headerlink" title="Puzzle 19"></a>Puzzle 19</h2><p>What is the potential problem with the following C program?</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">char</span> str[<span class="number">80</span>];</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Enter the string:&quot;</span>);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,str);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;You entered:%s\n&quot;</span>,str);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="输出：-6"><a href="#输出：-6" class="headerlink" title="输出："></a>输出：</h4><p><strong>注意： 我将原代码中 <code>char str[80]</code> 改成了 <code>char str[8]</code> 以供演示一种出问题的情况</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">myarch% gcc p19.c</span><br><span class="line">myarch% ./a.out  </span><br><span class="line">Enter the string:123</span><br><span class="line">You entered:123</span><br><span class="line">myarch% gcc p19.c</span><br><span class="line">myarch% ./a.out  </span><br><span class="line">Enter the string:1 2 3</span><br><span class="line">You entered:1</span><br><span class="line">myarch% ./a.out</span><br><span class="line">Enter the string:12345678</span><br><span class="line">You entered:12345678</span><br><span class="line">myarch% ./a.out</span><br><span class="line">Enter the string:123456789</span><br><span class="line">You entered:123456789</span><br><span class="line">*** stack smashing detected ***: terminated</span><br><span class="line">zsh: IOT instruction (core dumped)  ./a.out</span><br></pre></td></tr></table></figure>

<h4 id="分析：-10"><a href="#分析：-10" class="headerlink" title="分析："></a>分析：</h4><p>当使用 <code>scanf(&quot;%s&quot;, str)</code> 时，它会读取输入直到遇到一个White space(空格、制表符、换行符、回车、垂直制表符和换页符)为止。但更重要的是，scanf不会检查是否超出了str的大小。因此，如果用户输入了超过79个字符的字符串（因为我们需要为终止符\0预留一个位置），这将导致缓冲区溢出，可能会破坏其他内存位置或导致程序崩溃。</p>
<p>byw: 可以看到terminal输出中，当输入12345678这长度为8的字符串时，并没有出现 <code>stack smashing detecte(检测到堆栈崩溃)</code> 的状况，但是仍具有安全风险，因此最好使用 <code>scanf(&quot;%(size-1)s&quot;)</code> 来限制输入字符串长度，或者使用其他更安全的读取输入的函数。</p>
<blockquote>
<p> An input field is defined as a string of non-white space characters; it extends either to the next white space character or until the field width, is specified, is exhausted. This implies that scanf will read across boundaries to find its input, since newlines are white space. (White space characters are blank, tab, newline, carriage return, vertical tab, and formfeed.)</p>
</blockquote>
<h2 id="Puzzle-20"><a href="#Puzzle-20" class="headerlink" title="Puzzle 20"></a>Puzzle 20</h2><p>What is the output of the following program?</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> i;</span><br><span class="line">    i = <span class="number">10</span>;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;i : %d\n&quot;</span>,i);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;sizeof(i++) is: %d\n&quot;</span>,<span class="keyword">sizeof</span>(i++));</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;i : %d\n&quot;</span>,i);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="输出：-7"><a href="#输出：-7" class="headerlink" title="输出："></a>输出：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">myarch% gcc p20.c </span><br><span class="line">myarch% ./a.out </span><br><span class="line">i : 10</span><br><span class="line">sizeof(i++) is: 4</span><br><span class="line">i : 10</span><br></pre></td></tr></table></figure>

<h4 id="分析：-11"><a href="#分析：-11" class="headerlink" title="分析："></a>分析：</h4><p>C语言的 <code>sizeof</code> 操作符的值是编译时确定的，因此运行时不会执行 <code>i++</code> 这个表达式</p>
<blockquote>
<p>C provides a compile-time unary operator called sizeof that can be used to compute the size of any object</p>
</blockquote>
<p>btw: 用GCC、Clang等<strong>C编译器</strong>编译 <code>sizeof &#39;a&#39;</code> 的值其实是4, 这是因为当C语言最初被设计和实现时，它的目标之一是保持简单。在那个时候，许多操作，包括算术运算，都是以机器的字（通常是int大小）为单位进行的，这样可以获得更好的性能。将字符字面值作为int类型处理意味着字符可以直接用于算术和其他表达式，而不需要任何类型转换。</p>
<h2 id="Puzzle-21"><a href="#Puzzle-21" class="headerlink" title="Puzzle 21"></a>Puzzle 21</h2><p>Why does the following program give a warning? (Please remember that sending a normal pointer to a function requiring const pointer does not give any warning)</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">void</span> <span class="title function_">foo</span><span class="params">(<span class="type">const</span> <span class="type">char</span> **p)</span> &#123; &#125;</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> **argv)</span></span><br><span class="line">&#123;</span><br><span class="line">        foo(argv);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="输出：-8"><a href="#输出：-8" class="headerlink" title="输出："></a>输出：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">myarch% gcc p21.c</span><br><span class="line">p21.c: In function ‘main’:</span><br><span class="line">p21.c:5:13: warning: passing argument 1 of ‘foo’ from incompatible pointer type [-Wincompatible-pointer-types]</span><br><span class="line">    5 |         foo(argv);</span><br><span class="line">      |             ^~~~</span><br><span class="line">      |             |</span><br><span class="line">      |             char **</span><br><span class="line">p21.c:2:23: note: expected ‘const char **’ but argument is of type ‘char **’</span><br><span class="line">    2 | void foo(const char **p) &#123; &#125;</span><br><span class="line">      |          ~~~~~~~~~~~~~^</span><br></pre></td></tr></table></figure>

<h4 id="分析：-12"><a href="#分析：-12" class="headerlink" title="分析："></a>分析：</h4><p>函数 <code>foo</code> 的形参是<em>指向指向常量字符的指针的指针</em>，而在 <code>main</code> 函数中调用 <code>foo</code> 函数时传入的实参是<em>指向指向字符的指针的指针</em>，因此就会使指针 <code>argv</code> 指向一个<em>指向常量字符的指针</em>，而此操作会产生隐患，因此编译时会有 warning 提示。</p>
<h2 id="Puzzle-22"><a href="#Puzzle-22" class="headerlink" title="Puzzle 22"></a>Puzzle 22</h2><p>What is the output of the following program?</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">        <span class="type">int</span> i;</span><br><span class="line">        i = <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;i:%d\n&quot;</span>,i);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="输出：-9"><a href="#输出：-9" class="headerlink" title="输出："></a>输出：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">myarch% gcc p22.c </span><br><span class="line">myarch% ./a.out </span><br><span class="line">i:1</span><br></pre></td></tr></table></figure>

<h4 id="分析：-13"><a href="#分析：-13" class="headerlink" title="分析："></a>分析：</h4><p>有关<em>逗号运算符</em>参考 <em>Puzzle 10</em>，再补充一点的是<em>逗号操作符</em>的<em>优先级</em>在C语言所有运算符中是最低的，而因为赋值运算符具有<em>Side Effect</em>，因此虽然其返回值1被丢弃，但变量 <code>i</code> 已经被赋值为 1，即 i &#x3D; 1</p>
<h2 id="Puzzle-23"><a href="#Puzzle-23" class="headerlink" title="Puzzle 23"></a>Puzzle 23</h2><p>The following is a piece of code which implements the reverse Polish Calculator. There is a(are) serious(s) bug in the code. Find it(them) out!!! Assume that the function getop returns the appropriate return values for operands, opcodes, EOF etc..</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> MAX 80</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> NUMBER <span class="string">&#x27;0&#x27;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">getop</span><span class="params">(<span class="type">char</span>[])</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">push</span><span class="params">(<span class="type">double</span>)</span>;</span><br><span class="line"><span class="type">double</span> <span class="title function_">pop</span><span class="params">(<span class="type">void</span>)</span>;</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> type;</span><br><span class="line">    <span class="type">char</span> s[MAX];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>((type = getop(s)) != EOF)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">switch</span>(type)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">case</span> NUMBER:</span><br><span class="line">                push(atof(s));</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;+&#x27;</span>:</span><br><span class="line">                push(pop() + pop());</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;*&#x27;</span>:</span><br><span class="line">                push(pop() * pop());</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;-&#x27;</span>:</span><br><span class="line">                push(pop() - pop());</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;/&#x27;</span>:</span><br><span class="line">                push(pop() / pop());</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="comment">/*   ... </span></span><br><span class="line"><span class="comment">             *   ...    </span></span><br><span class="line"><span class="comment">             *   ... </span></span><br><span class="line"><span class="comment">             */</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="输出：-10"><a href="#输出：-10" class="headerlink" title="输出："></a>输出：</h4><p>无</p>
<h4 id="分析：-14"><a href="#分析：-14" class="headerlink" title="分析："></a>分析：</h4><p><em>逆波兰计算器（Reverse Polish Calculator:</em> 也被称为后缀表示法计算器（Postfix Notation Calculator），是一种使用逆波兰表示法（Reverse Polish Notation，简称RPN）的计算器。逆波兰表示法是一种没有括号、操作符在操作数之后的数学表示法。</p>
<p>简单地说，逆波兰表示法是一种表示算术表达式的方法，其中每个操作都在其相应的操作数之后。它特别适合计算机处理，因为它可以使用一个栈来计算表达式，不需要进行括号匹配或运算符优先级处理。</p>
<p>举个例子：<br>普通的算术表达式：(3 + 4) × 5 - 2<br>逆波兰表示法：3 4 + 5 × 2 -</p>
<p>因此可以看出，这里将两个数字从栈中取出并进行减法或除法的数字顺序是颠倒的（参考栈数据结构的特性：先进后出）</p>
<p>btw: 原代码内那个 atof(s) 的操作没看懂，不知道是作者笔误还是这也是个<em>serious bug</em></p>
<h2 id="Puzzle-24"><a href="#Puzzle-24" class="headerlink" title="Puzzle 24"></a>Puzzle 24</h2><p>The following is a simple program which implements a minimal version of banner command available on most *nix systems. Find out the logic used in the program.</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;ctype.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">char</span> t[]=&#123;</span><br><span class="line">    <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">12</span>,<span class="number">18</span>,<span class="number">33</span>,<span class="number">63</span>,</span><br><span class="line">    <span class="number">33</span>,<span class="number">33</span>,<span class="number">62</span>,<span class="number">32</span>,<span class="number">62</span>,<span class="number">33</span>,<span class="number">33</span>,<span class="number">62</span>,<span class="number">30</span>,<span class="number">33</span>,</span><br><span class="line">    <span class="number">32</span>,<span class="number">32</span>,<span class="number">33</span>,<span class="number">30</span>,<span class="number">62</span>,<span class="number">33</span>,<span class="number">33</span>,<span class="number">33</span>,<span class="number">33</span>,<span class="number">62</span>,</span><br><span class="line">    <span class="number">63</span>,<span class="number">32</span>,<span class="number">62</span>,<span class="number">32</span>,<span class="number">32</span>,<span class="number">63</span>,<span class="number">63</span>,<span class="number">32</span>,<span class="number">62</span>,<span class="number">32</span>,</span><br><span class="line">    <span class="number">32</span>,<span class="number">32</span>,<span class="number">30</span>,<span class="number">33</span>,<span class="number">32</span>,<span class="number">39</span>,<span class="number">33</span>,<span class="number">30</span>,<span class="number">33</span>,<span class="number">33</span>,</span><br><span class="line">    <span class="number">63</span>,<span class="number">33</span>,<span class="number">33</span>,<span class="number">33</span>,<span class="number">4</span>,<span class="number">4</span>,<span class="number">4</span>,<span class="number">4</span>,<span class="number">4</span>,<span class="number">4</span>,</span><br><span class="line">    <span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">33</span>,<span class="number">30</span>,<span class="number">33</span>,<span class="number">34</span>,<span class="number">60</span>,<span class="number">36</span>,</span><br><span class="line">    <span class="number">34</span>,<span class="number">33</span>,<span class="number">32</span>,<span class="number">32</span>,<span class="number">32</span>,<span class="number">32</span>,<span class="number">32</span>,<span class="number">63</span>,<span class="number">33</span>,<span class="number">51</span>,</span><br><span class="line">    <span class="number">45</span>,<span class="number">33</span>,<span class="number">33</span>,<span class="number">33</span>,<span class="number">33</span>,<span class="number">49</span>,<span class="number">41</span>,<span class="number">37</span>,<span class="number">35</span>,<span class="number">33</span>,</span><br><span class="line">    <span class="number">30</span>,<span class="number">33</span>,<span class="number">33</span>,<span class="number">33</span>,<span class="number">33</span>,<span class="number">30</span>,<span class="number">62</span>,<span class="number">33</span>,<span class="number">33</span>,<span class="number">62</span>,</span><br><span class="line">    <span class="number">32</span>,<span class="number">32</span>,<span class="number">30</span>,<span class="number">33</span>,<span class="number">33</span>,<span class="number">37</span>,<span class="number">34</span>,<span class="number">29</span>,<span class="number">62</span>,<span class="number">33</span>,</span><br><span class="line">    <span class="number">33</span>,<span class="number">62</span>,<span class="number">34</span>,<span class="number">33</span>,<span class="number">30</span>,<span class="number">32</span>,<span class="number">30</span>,<span class="number">1</span>,<span class="number">33</span>,<span class="number">30</span>,</span><br><span class="line">    <span class="number">31</span>,<span class="number">4</span>,<span class="number">4</span>,<span class="number">4</span>,<span class="number">4</span>,<span class="number">4</span>,<span class="number">33</span>,<span class="number">33</span>,<span class="number">33</span>,<span class="number">33</span>,</span><br><span class="line">    <span class="number">33</span>,<span class="number">30</span>,<span class="number">33</span>,<span class="number">33</span>,<span class="number">33</span>,<span class="number">33</span>,<span class="number">18</span>,<span class="number">12</span>,<span class="number">33</span>,<span class="number">33</span>,</span><br><span class="line">    <span class="number">33</span>,<span class="number">45</span>,<span class="number">51</span>,<span class="number">33</span>,<span class="number">33</span>,<span class="number">18</span>,<span class="number">12</span>,<span class="number">12</span>,<span class="number">18</span>,<span class="number">33</span>,</span><br><span class="line">    <span class="number">17</span>,<span class="number">10</span>,<span class="number">4</span>,<span class="number">4</span>,<span class="number">4</span>,<span class="number">4</span>,<span class="number">63</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="number">8</span>,</span><br><span class="line">    <span class="number">16</span>,<span class="number">63</span></span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">int</span> argc,<span class="type">char</span>** argv)</span></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> r,pr;</span><br><span class="line">    <span class="keyword">for</span>(r=<span class="number">0</span>;r&lt;<span class="number">6</span>;++r)</span><br><span class="line">        &#123;</span><br><span class="line">        <span class="type">char</span> *p=argv[<span class="number">1</span>];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span>(pr&amp;&amp;*p)</span><br><span class="line">            &#123;</span><br><span class="line">            <span class="type">int</span> o=(<span class="built_in">toupper</span>(*p++)-<span class="string">&#x27;A&#x27;</span>)*<span class="number">6</span>+<span class="number">6</span>+r;</span><br><span class="line">            o=(o&lt;<span class="number">0</span>||o&gt;=<span class="keyword">sizeof</span>(t))?<span class="number">0</span>:o;</span><br><span class="line">            <span class="keyword">for</span>(pr=<span class="number">5</span>;pr&gt;=<span class="number">-1</span>;--pr)</span><br><span class="line">                &#123;</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;%c&quot;</span>,( ( (pr&gt;=<span class="number">0</span>) &amp;&amp; (t[o]&amp;(<span class="number">1</span>&lt;&lt;pr)))?<span class="string">&#x27;#&#x27;</span>:<span class="string">&#x27; &#x27;</span>));</span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="输出：-11"><a href="#输出：-11" class="headerlink" title="输出："></a>输出：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">myarch% ./a.out A</span><br><span class="line">  ##   </span><br><span class="line"> #  #  </span><br><span class="line">#    # </span><br><span class="line">###### </span><br><span class="line">#    # </span><br><span class="line">#    # </span><br><span class="line">myarch% </span><br></pre></td></tr></table></figure>

<h4 id="分析：-15"><a href="#分析：-15" class="headerlink" title="分析："></a>分析：</h4><p>[TODO]</p>
<h2 id="Puzzle-25"><a href="#Puzzle-25" class="headerlink" title="Puzzle 25"></a>Puzzle 25</h2><p>What is the output of the following program?</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> SIZEOF(arr) (sizeof(arr)/sizeof(arr[0]))</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> PrintInt(expr) printf(<span class="string">&quot;%s:%d\n&quot;</span>,#expr,(expr))</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">/* The powers of 10 */</span></span><br><span class="line">    <span class="type">int</span> pot[] = &#123;</span><br><span class="line">        <span class="number">0001</span>,</span><br><span class="line">        <span class="number">0010</span>,</span><br><span class="line">        <span class="number">0100</span>,</span><br><span class="line">        <span class="number">1000</span></span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="type">int</span> i;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;SIZEOF(pot);i++)</span><br><span class="line">        PrintInt(pot[i]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="输出：-12"><a href="#输出：-12" class="headerlink" title="输出："></a>输出：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">myarch% gcc p25.c </span><br><span class="line">myarch% ./a.out </span><br><span class="line">pot[i]:1</span><br><span class="line">pot[i]:8</span><br><span class="line">pot[i]:64</span><br><span class="line">pot[i]:1000</span><br></pre></td></tr></table></figure>

<h4 id="分析：-16"><a href="#分析：-16" class="headerlink" title="分析："></a>分析：</h4><p>C语言中数字表示的格式</p>
<ul>
<li><p>以0开头的数字表示八进制。</p>
</li>
<li><p>不以特定前缀开头的数字默认为十进制。</p>
</li>
<li><p>0x或0X前缀表示十六进制数字</p>
</li>
</ul>
<p><em>byw:</em> 在标准的C语言中，并没有直接的方法来表示二进制数字。但是，某些编译器（如较新的GCC）提供了以0b前缀表示的扩展</p>
<h2 id="Puzzle-26"><a href="#Puzzle-26" class="headerlink" title="Puzzle 26"></a>Puzzle 26</h2>
        </div>
          
        <div class="top-div">
          <ol class="top-box"><li class="top-box-item top-box-level-1"><a class="top-box-link" href="#C-Puzzles"><span class="top-box-text">C Puzzles</span></a><ol class="top-box-child"><li class="top-box-item top-box-level-2"><a class="top-box-link" href="#Puzzle-1"><span class="top-box-text">Puzzle 1</span></a></li><li class="top-box-item top-box-level-2"><a class="top-box-link" href="#Puzzle-2"><span class="top-box-text">Puzzle 2</span></a></li><li class="top-box-item top-box-level-2"><a class="top-box-link" href="#Puzzle-3"><span class="top-box-text">Puzzle 3</span></a></li><li class="top-box-item top-box-level-2"><a class="top-box-link" href="#Puzzle-4"><span class="top-box-text">Puzzle 4</span></a></li><li class="top-box-item top-box-level-2"><a class="top-box-link" href="#Puzzle-5"><span class="top-box-text">Puzzle 5</span></a></li><li class="top-box-item top-box-level-2"><a class="top-box-link" href="#Puzzle-6"><span class="top-box-text">Puzzle 6</span></a></li><li class="top-box-item top-box-level-2"><a class="top-box-link" href="#Puzzle-7"><span class="top-box-text">Puzzle 7</span></a></li><li class="top-box-item top-box-level-2"><a class="top-box-link" href="#Puzzle-8"><span class="top-box-text">Puzzle 8</span></a></li><li class="top-box-item top-box-level-2"><a class="top-box-link" href="#Puzzle-9"><span class="top-box-text">Puzzle 9</span></a></li><li class="top-box-item top-box-level-2"><a class="top-box-link" href="#Puzzle-10"><span class="top-box-text">Puzzle 10</span></a></li><li class="top-box-item top-box-level-2"><a class="top-box-link" href="#Puzzle-11"><span class="top-box-text">Puzzle 11</span></a></li><li class="top-box-item top-box-level-2"><a class="top-box-link" href="#Puzzle-12"><span class="top-box-text">Puzzle 12</span></a></li><li class="top-box-item top-box-level-2"><a class="top-box-link" href="#Puzzle-13"><span class="top-box-text">Puzzle 13</span></a></li><li class="top-box-item top-box-level-2"><a class="top-box-link" href="#Puzzle-14"><span class="top-box-text">Puzzle 14</span></a></li><li class="top-box-item top-box-level-2"><a class="top-box-link" href="#Puzzle-15"><span class="top-box-text">Puzzle 15</span></a></li><li class="top-box-item top-box-level-2"><a class="top-box-link" href="#Puzzle-16"><span class="top-box-text">Puzzle 16</span></a></li><li class="top-box-item top-box-level-2"><a class="top-box-link" href="#Puzzle-17"><span class="top-box-text">Puzzle 17</span></a></li><li class="top-box-item top-box-level-2"><a class="top-box-link" href="#Puzzle-18"><span class="top-box-text">Puzzle 18</span></a></li><li class="top-box-item top-box-level-2"><a class="top-box-link" href="#Puzzle-19"><span class="top-box-text">Puzzle 19</span></a></li><li class="top-box-item top-box-level-2"><a class="top-box-link" href="#Puzzle-20"><span class="top-box-text">Puzzle 20</span></a></li><li class="top-box-item top-box-level-2"><a class="top-box-link" href="#Puzzle-21"><span class="top-box-text">Puzzle 21</span></a></li><li class="top-box-item top-box-level-2"><a class="top-box-link" href="#Puzzle-22"><span class="top-box-text">Puzzle 22</span></a></li><li class="top-box-item top-box-level-2"><a class="top-box-link" href="#Puzzle-23"><span class="top-box-text">Puzzle 23</span></a></li><li class="top-box-item top-box-level-2"><a class="top-box-link" href="#Puzzle-24"><span class="top-box-text">Puzzle 24</span></a></li><li class="top-box-item top-box-level-2"><a class="top-box-link" href="#Puzzle-25"><span class="top-box-text">Puzzle 25</span></a></li><li class="top-box-item top-box-level-2"><a class="top-box-link" href="#Puzzle-26"><span class="top-box-text">Puzzle 26</span></a></li></ol></li></ol>
        </div>
          
      </div>
    </div>

    
      <div class="next-post">
        <a class="purple-link" href="/2023/10/17/C-notes/">
          <h3 class="post-title">
            下一篇：C_notes
          </h3>
        </a>
      </div>
    
  </div>










<footer>
<div class="site-footer">
  <div class="social-container">
    
      
        <a aria-label="跳转至github" href="https://github.com/hzrr" target="_blank">
          <i class="icon icon-github"></i>
        </a>
      
    
      
    
      
    
      
    
      
    
  </div>
  
    Powered by <a href="https://hexo.io/" target="_blank">Hexo</a> <a href="https://github.com/f-dong/hexo-theme-minimalism" target="_blank">Theme</a>
  
  
  
  
  
  
</div>
</footer>


      </div>
    </div>
    
<script id="hexo-configurations"> window.theme_config = {"image":{"lazyload_enable":true,"photo_zoom":"simple-lightbox"}}; window.is_post = true; </script>

<script src="/js/main.js"></script>






  </body>
</html>

